#!/bin/bash

export TEMP=C:\\temp
export TMP=C:\\temp

if   [[ "$OSTYPE" == "cygwin" ]]
then
    GVIM_EXE=/cygdrive/c/Program\ Files\ \(x86\)/Vim/vim74/gvim.exe
elif [[ "$OSTYPE" == "msys" ]]
then
    GVIM_EXE=/c/Program\ Files\ \(x86\)/Vim/vim74/gvim.exe
else
    GVIM_EXE=gvim
fi


if [[ -z "$@" ]]
then
    eval \"$GVIM_EXE\" &
else
    IFS='#'
    params=""
    opts=""

    for i in $@; do
        if   [[ $i == -* ]]
        then
            opts="$opts $i" 
        else
            if   [[ "$OSTYPE" == "cygwin" ]]
            then
                file="`cygpath -w \"$i\"`" 
            elif [[ "$OSTYPE" == "msys" ]]
            then
                file="`echo $i | sed -re 's/^\/([a-z])\//\1:\//g'`" 
            else
                file=$i
            fi
            params="$params \"$file\""
        fi
    done

    eval \"$GVIM_EXE\" $opts --remote-tab-silent $params &
fi
